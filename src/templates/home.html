{% extends "base.html" %}
{% load i18n %}

{% load staticfiles %}
{% load django_markdown %}
{% load country_isocode %}
{% load get_translation %}

{% block title %}{% trans "Economic & Innovation Forum" %}{% endblock %}

{% block page_title %}Index{% endblock page_title %}

{% block content %}
<style>
    .container {
    width: 100%;
}
</style>

<!-- for pop-up video -->
<script type="text/javascript" src="{% static "jquery-migrate/jquery-migrate.min.js" %}"></script>
<script type="text/javascript" src="{% static "fancybox/source/jquery.fancybox.pack.js" %}"></script>
<link rel="stylesheet" type="text/css" href="{% static "fancybox/source/jquery.fancybox.css" %}" media="screen" />
<script type="text/javascript" src="{% static "js/video.js" %}"></script>

<!-- for hiding button -->
<script type="text/javascript">
    function hideshow(which){
    if (!document.getElementById)
    return
    if (which.style.display=="inline")
    which.style.display="none"
    else
    which.style.display="inline"
    }
</script>

{% if user.is_anonymous %}
	<style>
	@media screen and (max-width:740px){
		 #toprightbuttons {
			display:none;
		}
	}
	</style>
{% else %}
	<style>
	@media screen and (max-width:920px){
		 #toprightbuttons {
			display:none;
		}
	}
	</style>
{% endif %}

<div id="toprightbuttons" class="alignright">
{% if not user.is_anonymous %}
    <!--
    <span id="info" style="display:none; color: brown;">
    <b>
        [<a href="{% url "invite:send"  %}">{{user.invitationoption.invitations_left}} {% trans "invitations" %}</a>, <a href="/step/2/detail/">{% trans "write bugs" %}</a>, {% trans "time value" %}: 1 ħ = <a href="https://research.stlouisfed.org/fred2/series/CES0500000003">{{ hour_value.value|floatformat:2 }}</a> $]
    </b>
    </span>
    <a class="btn-lg" style="color: black; background-color: #F0F0F0;" href="javascript:hideshow(document.getElementById('info'))">{{user.invitationoption.invitations_left}} <i class="fa fa-envelope-o"></i> {% trans "invite a friend" %}</a>
	-->
	<a class="btn-lg" style="color: black; background-color: #F0F0F0;" href="{% url "invite:send" %}">{{user.invitationoption.invitations_left}} <i class="fa fa-envelope-o"></i> {% trans "invite a friend" %}</a>

    {% if request|get_country_by_ip != 'CN' %}
    <a class="video btn-lg" style="color: black; background-color: #F0F0F0;" href="https://www.youtube.com/v/zeBgP31KaqY?hd=1&autoplay=1&autohide=1&showinfo=0&rel=0&wmode=transparent">{% trans "Intro" %}</a>
    <a class="video btn-lg" style="color: black; background-color: #F0F0F0;" href="https://www.youtube.com/v/a0mO143FfUI?hd=1&autoplay=1&autohide=1&showinfo=0&rel=0&wmode=transparent">{% trans "Help" %}</a>
    <br/>
    {% else %}
    <a class="btn-lg" style="color: black; background-color: #F0F0F0;" href="http://player.youku.com/player.php/sid/XMTQyMTEyMjk3Mg/v.swf">{% trans "Intro" %}</a>
    <a class="btn-lg" style="color: black; background-color: #F0F0F0;" href="http://player.youku.com/player.php/sid/XMTQyMTEyMjk3Mg/v.swf" target="_blank">{% trans "Video" %}</a>
    {% endif %}

{% else %}

{% if request|get_country_by_ip != 'CN' %}
<a class="video btn-lg" style="color: black; background-color: #F0F0F0;" href="https://www.youtube.com/v/zeBgP31KaqY?hd=1&autoplay=1&autohide=1&showinfo=0&rel=0&wmode=transparent">{% trans "Video" %}</a>
<br/>
{% else %}
<a class="btn-lg" style="color: black; background-color: #F0F0F0;" href="http://player.youku.com/player.php/sid/XMTQyMTEyMjk3Mg/v.swf" target="_blank">{% trans "Video" %}</a>
{% endif %}

{% endif %}
</div>

<div class="alignleft">

	<div class="btn-group" style="position: relative; height:10px; bottom:24px;">
	  <button type="button" class="btn-lg btn" style='font-weight: normal; text-transform: none; color: white; background-color: black; font-size: 18px; font-family: "Droid Serif",sans-serif' onclick="window.location.href={% url 'goal-create' %}">{% trans "compose" %}</button>
	  <button type="button" class="btn-lg btn dropdown-toggle" style="color: black; border-radius: 0px; background-color: #f0f0f0;" data-toggle="dropdown">
		<span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu" role="menu">
		  <li><a href="{% url 'goal-create' %}">{% trans "Problem" %}</a></li>
		  <li><a href="{% url 'idea-create' %}">{% trans "Solution" %}</a></li>
		  <li><a href="{% url 'plan-create' %}">{% trans "Project" %}</a></li>
	  </ul>

      <style>
      @media screen and (max-width:450px){    
      #searchbox {
	       max-width: 150px;
          }
      }
	  </style>
      <form action="{{request.get_full_path}}" method="get" style="display: inline; margin-left:10px;">
      <input id="searchbox" name="s" autocomplete="off" class="btn-lg" tabindex="-1" type="text" aria-hidden="true" size="35" style="display: inline; border-radius: 0px; height: 46px; font-weight: normal; text-transform: none; color: blue; background-color: #f0f0f0;font-size: 18px; font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif"><input class="btn-lg" type="submit" value="🔍" style="margin-left: 5px; margin-bottom: 2px; height: 48px; color: GrayText; background-color: #f0f0f0;">
      </form>
      <!--
      <div style="display: inline; margin-left:10px;">
          <button type="submit" id="ithink" class="btn-lg" style="margin-left: 5px; margin-bottom: 1px; height: 49px; color: GrayText; border:none;">
              <i class="fa fa-bug"></i>
          </button>
          <button type="submit" id="ichart" class="btn-lg" style="margin-left: 5px; margin-bottom: 1px; height: 49px; color: GrayText; border:none;">
              <i class="fa fa-paper-plane"></i>
          </button>
          <button type="submit" id="icreate" class="btn-lg" style="margin-left: 5px; margin-bottom: 1px; height: 49px; color: GrayText; border:none;">
              <i class="fa fa-rocket"></i>
          </button>
      </div>
	  -->
	</div>
</div>
<style>
#ithink:hover {
    text-shadow: 0 0 25px #F6358A;
}
#ichart:hover {
    text-shadow: 0 0 25px lime;
}
#icreate:hover {
    text-shadow: 0 0 25px yellow;
}
</style>
<script>

$(document).ready(function(){

    // keep the scope in session
	//var scope = localStorage['scope'];
    localStorage['scope'] = "ichart";

	if (!scope) {
		localStorage['scope'] = "ichart";
	}
    $('#'.concat(scope)).css('color', 'black');

    if (scope=='ithink') {
      $( "div.row-horizon" ).scrollLeft( -($(window).width()*2/3) );
      $('#'.concat(scope)).css('text-shadow', '0 0 15px #F6358A');
	  $('#goals').removeClass('col-md-4').addClass('col-md-5');
	  $('#ideas').removeClass('col-md-5').addClass('col-md-4');
	  $('#plans').removeClass('col-md-5').addClass('col-md-4');
    }
    else if (scope=='ichart') {
      $( "div.row-horizon" ).scrollLeft( $(window).width()*1.01 );
      $('#'.concat(scope)).css('text-shadow', '0 0 15px lime');
	  $('#goals').removeClass('col-md-5').addClass('col-md-4');
	  $('#ideas').removeClass('col-md-4').addClass('col-md-5');
	  $('#plans').removeClass('col-md-5').addClass('col-md-4');
    }
    else if (scope=='icreate') {
      $( "div.row-horizon" ).scrollLeft( $(window).width()*2.01 );
      $('#'.concat(scope)).css('text-shadow', '0 0 15px yellow');
	  $('#goals').removeClass('col-md-5').addClass('col-md-4');
	  $('#ideas').removeClass('col-md-5').addClass('col-md-4');
	  $('#plans').removeClass('col-md-4').addClass('col-md-5');
    } 
});

// Click Actions
    $('#ithink').on("click",function(event){
      $( "div.row-horizon" ).scrollLeft( -($(window).width()*2/3) );
      $('#ithink').css('color', 'black');
      $('#ithink').css('text-shadow', '0 0 15px #F6358A');
      $('#ichart').css('color', 'grey');
      $('#ichart').css('text-shadow', 'none');
      $('#icreate').css('color', 'grey');
      $('#icreate').css('text-shadow', 'none');

	  $('#goals').removeClass('col-md-4').addClass('col-md-5');
	  $('#ideas').removeClass('col-md-5').addClass('col-md-4');
	  $('#plans').removeClass('col-md-5').addClass('col-md-4');
	  localStorage['scope'] = 'ithink';
		event.preventDefault();
    });

    $('#ichart').on("click",function(event){
      $( "div.row-horizon" ).scrollLeft( $(window).width()*1.01 );
      $('#ithink').css('color', 'grey');
      $('#ithink').css('text-shadow', 'none');
      $('#ichart').css('color', 'black');
      $('#ichart').css('text-shadow', '0 0 15px lime');
      $('#icreate').css('color', 'grey');
      $('#icreate').css('text-shadow', 'none');

	  $('#goals').removeClass('col-md-5').addClass('col-md-4');
	  $('#ideas').removeClass('col-md-4').addClass('col-md-5');
	  $('#plans').removeClass('col-md-5').addClass('col-md-4');
	  localStorage['scope'] = 'ichart';
		event.preventDefault();
    });

    $('#icreate').on("click",function(event){
      $( "div.row-horizon" ).scrollLeft( $(window).width()*2.01 );
      $('#ithink').css('color', 'grey');
      $('#ithink').css('text-shadow', 'none');
      $('#ichart').css('color', 'grey');
      $('#ichart').css('text-shadow', 'none');
      $('#icreate').css('color', 'black');
      $('#icreate').css('text-shadow', '0 0 15px yellow');

	  $('#goals').removeClass('col-md-5').addClass('col-md-4');
	  $('#ideas').removeClass('col-md-5').addClass('col-md-4');
	  $('#plans').removeClass('col-md-4').addClass('col-md-5');
	  localStorage['scope'] = 'icreate';
		event.preventDefault();
    });
</script>

<div style="clear:both;">
    <br/>

    <link rel="stylesheet" href="{% static "bootstrap-horizon/bootstrap-horizon.css" %}">
<!--
    <div id="scroll_arrowleft"></div>
    <div id="scroll_arrowright"></div>
-->
    <div class="row row-horizon">

    <! -- Start of Goals -- >
        <div id="goals" class="panel panel-default col-md-4 block-content" style="border: none; padding: 0px; margin-left:15px;">
            <div class="panel-heading" style="border-bottom: 1px dotted; background-color: #ffffff;">
				<!-- <a href="{% url "goal-list" %}">{% trans "Goals" %}</a>-->
				&nbsp; <a href="{% url "goal-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; - <b><a href="{% url "goal-list" %}" style="color:black; text-decoration: none; cursor: default">{% trans "define a problem" %}</a></b>
                <!-- drop-down
                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="goals" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.goals == value %}selected{% endif %}>{{ value }}</option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
				-->
            </div>

            <div class="panel-body" style="padding: 0; margin-top: 0px;">
                {% if goal_list %}
                    {% for goal in goal_list %}

                        {% if goal.translation %} {# if goal translated #}

						    <!-- card style -->
							{% if forloop.counter|divisibleby:2 %}
							<div style="background-color:#ffffff; padding: 10px; padding-top: 20px; padding-bottom: 20px; border-bottom: #e0e0e0 1px dotted;">
							{% else %}
							<div style="background-color:#ffffff; padding: 10px; padding-top: 20px; padding-bottom: 20px; border-bottom: #e0e0e0 1px dotted;">
							{% endif %}

                                 {% if goal.object.is_link %}
                                     {% if goal.object.is_historical %}
                                     <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                     {% else %}
                                     <span class="badge">{% trans "link" %}</span>
                                     {% endif %}
                                 {% else %}
                                     {% if goal.object.is_historical %}
                                     <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                     {% endif %}
                                 {% endif %}
 
                                 <b>
                                     {% if goal.object.personal %}
                                     <i class="fa {% if goal.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                                     $ {{ goal.object.get_usd|floatformat:2 }}/{{ goal.object.get_remain_usd|floatformat:2 }}
                                     {% endif %}
                                 </b>
                                 
                                 <a {% if goal.is_new %}style="font-weight: bold"{% endif %} href="{% url "goal-detail" goal.object.pk %}?lang={{goal.translation.language.language_code}}#{{goal.object.commented_at|date:"U"}}">{{ goal.translation.name }}</a>

                            ({{goal.object.comment_count}} comments) 

                            <br/>

                            <p>{{goal.translation.reason|markdown|truncatewords_html:34}}</p>

          					</div> <!--/card style div-->

                        {% endif %}
                    {% endfor %}
					<!--<a href="{% url "goal-list" %}">{% trans "see more" %}</a>-->
                {% else %}
                {% endif %}
                    <center>
						<p><!--{% trans "Oops! You have no goals!" %}--></p>
                        <p><a href="{% url "goal-create" %}">{% trans "Add a problem" %}</a></p>
                        <p>{% trans "...or view" %} <a href="{% url "goal-list" %}">{% trans "all problems" %}</a>.</p>
                    </center>

					<p><i><u>{% trans "Example:" %}</u></i></p>
                    {% blocktrans %}
                    <p><b>Omelette Supply Problem</b></p>
                    <p>Omelette is a healthy and delicious food, which can be flavored in desired tastes. I like it, and I would like to eat omelete every morning, without any extra expenses.</p>
                    {% endblocktrans %}
            </div>
        </div>

	<!-- Start of Idea -->
    {% if request.get_full_path == '/i' %}
        <div id="ideas" class="panel panel-default col-md-5 block-content" style="border: none; padding: 0px; padding-left: 6px; padding-right: 0px;">
    {% else %}
        <div id="ideas" class="panel panel-default col-md-5 block-content" style="border: none; padding: 0px; padding-left: 6px; padding-right: 0px;">
    {% endif %}
            <div class="panel-heading" style="border-bottom: 1px dotted; background-color: #ffffff;">
				<!--<a href="{% url "idea-list" %}">{% trans "Ideas" %}</a>-->&nbsp;
				<a href="{% url "idea-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; - <b><a href="{% url "idea-list" %}" style="color:black; text-decoration: none; cursor: default">{% trans "suggest a solution" %}</a></b>
                <!-- drop-down
				<div style="display:inline-block; float: right;">
					<form method="post" style="display:inline;">{% csrf_token %}
						<select name="ideas" onchange="this.form.submit()">
							{% for value in dropdown_list %}
							<option value="{{ value }}" {% if items.ideas == value %}selected{% endif %}>
							{{ value }}
							</option>
							{% endfor %}
						</select>
					</form>
				</div>
				-->
            </div>

            <div class="panel-body" style="padding: 0;  margin-top: -10px;">
                {% if idea_list %}
                <p align="center">
                </p>
                {% for idea in idea_list %}


                    {% if idea.translation %} {# if idea translated #}

						{% if forloop.counter|divisibleby:2 %}
						<div style="background-color:#ffffff; padding: 10px; padding-bottom: 20px; padding-top: 20px; border-bottom: #e0e0e0 1px dotted;">
						{% else %}
						<div style="background-color:#ffffff; padding: 10px; padding-bottom: 20px; padding-top: 20px; border-bottom: #e0e0e0 1px dotted;">
						{% endif %}

                            {% if idea.object.is_link %}
                                {% if idea.object.is_historical %}
                                <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                {% else %}
                                <span class="badge">{% trans "link" %}</span>
                                {% endif %}
                            {% else %}
                                {% if idea.object.is_historical %}
                                <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                {% endif %}
                            {% endif %}

                        <b>
                            {% if idea.object.personal %}
                            <i class="fa {% if idea.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                            {% endif %}
							<!-- $ {{ idea.object.get_usd|floatformat:2 }}/{{ idea.object.get_remain_usd|floatformat:2 }}-->

                        </b>

                        <a {% if idea.is_new%}style="font-weight: bold"{% endif %} href="{% url "idea-detail" idea.object.pk %}?lang={{idea.translation.language.language_code}}#{{idea.object.commented_at|date:"U"}}">{{ idea.translation.name }}</a>

                        ({{idea.object.comment_count}} comments</a>)

                        <br/>
                            <span style="font-variant:small-caps;">
								<!-- <i class="fa fa-bug"></i>-->
					        {% for goal in idea.object.goal.all %}

								{% if goal.personal %}
									{% if request.user in goal.sharewith or request.user == goal.user %}

									<a style="color:grey;" href="{% url "goal-detail" goal.id %}?lang={{request.LANGUAGE_CODE}}">{% get_translation goal request.LANGUAGE_CODE "name" %}</a>{% if forloop.last %}{% else %}, {%endif%} 

									{% else %}

									<a style="color:grey;" href="{% url "goal-detail" goal.id %}?lang={{request.LANGUAGE_CODE}}">{% trans "Private" %} (u:{{goal.user.username}})</a>{% if forloop.last %}{% else %}, {%endif%} 

									{% endif %}
								{% else %}
									<a style="color:grey;" href="{% url "goal-detail" goal.id %}?lang={{request.LANGUAGE_CODE}}">{% get_translation goal request.LANGUAGE_CODE "name" %}</a>{% if forloop.last %}{% else %}, {%endif%} 
								{% endif %}

							{% endfor %}
                            </span>
							<br/>

                        <p>{{idea.translation.description|markdown|truncatewords_html:34}}</p>

				        </div>
                    {% endif %}
                {% endfor %}
				<!--<a href="{% url "idea-list" %}">{% trans "see more" %}</a>-->

                {% else %}
                {% endif %}
                <center>
					<br>
                    <p><a href="{% url "idea-create" %}">{% trans "Add a solution" %}</a></p>
                    <p>{% trans "...or view" %} <a href="{% url "idea-list" %}">{% trans "all solutions" %}</a>.</p>
                </center>

				<p><i><u>{% trans "Example:" %}</u></i></p>
                {% blocktrans %}
                <p><b>Roof Mini-Farm With Automated Egg Processor</b></p>
                <p>Hens don't really require much human work to maintain. Set up the robotic feeders, egg collectors, washers, breakers, timed mixers, spicers, cookers and dispensers - and have a self-sustaining supply of fresh omelete.</p>
                {% endblocktrans %}

            </div>
        </div>

    {% if request.get_full_path == '/i' %}
        <div id="plans" class="panel panel-default col-md-4 block-content" style="border: none; padding: 0px; padding-left: 6px;">
    {% else %}
        <div id="plans" class="panel panel-default col-md-4 block-content" style="border: none; padding: 0px; padding-left: 6px;">
    {% endif %}
            <div class="panel-heading" style="border-bottom: 1px dotted; background-color: #ffffff;">
				<!--<a href="{% url "plan-list" %}">{% trans "Plans" %}</a>-->&nbsp;
                <a href="{% url "plan-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; -
				<b><a href="{% url "plan-list" %}" style="color:black; text-decoration: none; cursor: default">{% trans "start a project" %}</a></b>
                <!--
                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="plans" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.plans == value %}selected{% endif %}>
                            {{ value }}
                            </option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
				-->
            </div>

            <div class="panel-body" style="padding: 0; margin-top: 0px;">
                {% if plan_list %}

                {% for plan in plan_list %}


                    {% if plan.translation %}  {# if plan translated #}

						{% if forloop.counter|divisibleby:2 %}
						<div style="background-color:#ffffff; padding: 10px; padding-bottom: 20px; padding-top: 20px; border-bottom: #e0e0e0 1px dotted;">
						{% else %}
						<div style="background-color:#ffffff; padding: 10px; padding-bottom: 20px; padding-top: 20px; border-bottom: #e0e0e0 1px dotted;">
						{% endif %}

                            {% if plan.object.is_link %}
                                {% if plan.object.is_historical %}
                                <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                {% else %}
                                <span class="badge">{% trans "link" %}</span>
                                {% endif %}
                            {% else %}
                                {% if plan.object.is_historical %}
                                <span class="badge" style="background-color: brown;">{% trans "historical" %}</span>
                                {% endif %}
                            {% endif %}

                    <b>
                        {% if plan.object.personal %}
                        <i class="fa {% if plan.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                        {% endif %}

                        $ {{ plan.object.get_usd|floatformat:2 }}/{{ plan.object.get_remain_usd|floatformat:2 }}
                    </b>

                    <a {% if plan.is_new%}style="font-weight: bold"{% endif %} href="{% url "plan-detail" plan.object.pk %}?lang={{plan.translation.language.language_code}}#{{plan.object.commented_at|date:"U"}}">{{ plan.translation.name }}</a>

                    ({{plan.object.comment_count}} comments)

                    <br/>
                            <span style="font-variant:small-caps;">
								<!--<i class="fa fa-paper-plane"></i>-->
							{% if plan.object.idea.personal %}
							    {% if request.user in plan.object.idea.sharewith or request.user == plan.object.idea.user %}
								<a style="color:grey;" href="{% url "idea-detail" plan.object.idea.id %}?lang={{request.LANGUAGE_CODE}}">{% get_translation plan.object.idea request.LANGUAGE_CODE "name" %}</a></span> 
 							    {% else %}
								<a style="color:grey;" href="{% url "idea-detail" plan.object.idea.id %}?lang={{request.LANGUAGE_CODE}}">{% trans "Private" %} (u:{{plan.object.idea.user.username}})</a></span> 
								{% endif %}
							{% else %}
							<a style="color:grey;" href="{% url "idea-detail" plan.object.idea.id %}?lang={{request.LANGUAGE_CODE}}">{% get_translation plan.object.idea request.LANGUAGE_CODE "name" %}</a></span> 
							{% endif %}
							<br/>

                        <p>{{plan.translation.deliverable|markdown|truncatewords_html:34}}</p>

				    </div>

                    {% endif %}
                {% endfor %}
				<!--<a href="{% url "plan-list" %}">{% trans "see more" %}</a>-->

                {% else %}
                {% endif %}
                <center>
					<p><!--{% trans "Oops! You have no plans!" %}--></p>
                    <p><a href="{% url "plan-create" %}">{% trans "Add a project" %}</a></p>
                    <p>{% trans "...or view" %} <a href="{% url "plan-list" %}">{% trans "all projects" %}</a>.</p>
                </center>

				<p><i><u>{% trans "Example:" %}</u></i></p>
                {% blocktrans %}
                <p><b>$ 0.00 Omelette Microfarm Project</b></p>
                We expect to have a microfarm solutions provider, which sustains itself via a business model based on demand and supply, based on simple-to-install construction kits supply chain for home owners.</p>
                {% endblocktrans %}
            </div>
        </div>



    </div>
    <div align="center">{% trans "People-centric economy." %}</div>

</div>
{% endblock content %}
