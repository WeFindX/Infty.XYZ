{% extends "base.html" %}

{% block title %}Index{% endblock %}

{% block page_title %}Index{% endblock page_title %}

{% block content %}
<style>
.container {
    width: 100%;
}
</style>

<div class="alignleft">The recent {{ number_of_items }} items. Items in <b>bold</b> had been created in last <b>{{last_days}}</b> days.</div>
{% if user.is_anonymous %}
{% else %}
<div class="alignright">{% if user.invitationoption.invitations_left %}<b>[<a href="{% url "invite:send"  %}">{{user.invitationoption.invitations_left}} invitations</a>, <a href="/step/2/detail/">write bugs</a>, time value: 1 Ä§ = <a href="https://research.stlouisfed.org/fred2/series/CES0500000003">{{ hour_value.value|floatformat:2 }}</a>]</b>{% endif %}</div>
{% endif %}
<br/>
<br/>
<div style="clear:both;">

<link rel="stylesheet" href="/static/css/bootstrap-horizon.css">

<div class="row row-horizon">

<div class="panel panel-default col-md-3">
    <div class="panel-heading"><a href="{% url "goal-list" %}">Goals</a>&nbsp; <a href="{% url "goal-create" %}"><i class="fa fa-plus-circle"></a></i></a>&nbsp; - <b>define a problem</b>
    
    <div style="display:inline-block; float: right;"><form method="post" style="display:inline;">{% csrf_token %}<select name="goals" onchange="this.form.submit()">{% for value in dropdown_list %}<option value="{{ value }}" {% if items.goals == value %}selected{% endif %}>{{ value }}</option>{% endfor %}</select></form></div></div>
    <div class="panel-body">
    <p align="center"><i>(goals commented in last {{ goal_days }} days)</i></p>
    {% for goal in goal_list %}
    <b>$ {{ goal.0.get_usd|floatformat:2 }}/{{ goal.0.get_remain_usd|floatformat:2 }} </b> {% if goal.1 %}<b>{% endif %}<a href="{% url "goal-detail" goal.0.pk %}#{{goal.0.commented_at|date:"U"}}">{{ goal.0.name }}</a>{% if goal.1 %}</b>{% endif %} (<a href="{% url "goal-detail" goal.0.pk %}#{{goal.0.commented_at|date:"U"}}">{{goal.0.comment_count}} comments</a>)<br/><p>{{goal.0.reason|truncatechars:314}}</p>
    {% endfor %}
    <a href="{% url "goal-list" %}">see more</a>
    </div>
</div>

<div class="panel panel-default col-md-3">
    <div class="panel-heading"><a href="{% url "idea-list" %}">Ideas</a>&nbsp;<a href="{% url "idea-create" %}"><i class="fa fa-plus-circle"></a></i></a>&nbsp; - <b>suggest a solution</b><div style="display:inline-block; float: right;"><form method="post" style="display:inline;">{% csrf_token %}<select name="ideas" onchange="this.form.submit()">{% for value in dropdown_list %}<option value="{{ value }}" {% if items.ideas == value %}selected{% endif %}>{{ value }}</option>{% endfor %}</select></form></div></div>
    <div class="panel-body">
    <p align="center"><i>(ideas commented in last {{ idea_days }} days)</i></p>
    {% for idea in idea_list %}
    <b>$ {{ idea.0.get_usd|floatformat:2 }}/{{ idea.0.get_remain_usd|floatformat:2 }} </b> {% if idea.1 %}<b>{% endif %}<a href="{% url "idea-detail" idea.0.pk %}#{{idea.0.commented_at|date:"U"}}">{{ idea.0.name }}</a>{% if idea.1 %}</b>{% endif %} (<a href="{% url "idea-detail" idea.0.pk %}#{{idea.0.commented_at|date:"U"}}">{{idea.0.comment_count}} comments</a>)<br/><p>{{idea.0.description|truncatechars:314}}</p>
    {% endfor %}
    <a href="{% url "idea-list" %}">see more</a>
    </div>
</div>

<div class="panel panel-default col-md-3">
    <div class="panel-heading">
        <a href="{% url "plan-list" %}">Plans</a>&nbsp;<a href="{% url "plan-create" %}"><i class="fa fa-plus-circle"></a></i></a>&nbsp; - <b>start a project</b> <div style="display:inline-block; float: right;"><form method="post" style="display:inline;">{% csrf_token %}<select name="plans" onchange="this.form.submit()">{% for value in dropdown_list %}<option value="{{ value }}" {% if items.plans == value %}selected{% endif %}>{{ value }}</option>{% endfor %}</select></form></div>
    </div>
    <div class="panel-body">
    <p align="center"><i>(plans commented in last {{ plan_days }} days)</i></p>
    {% for plan in plan_list %}
    <b>$ {{ plan.0.get_usd|floatformat:2 }}/{{ plan.0.get_remain_usd|floatformat:2 }} </b> {% if plan.1 %}<b>{% endif %}<a href="{% url "plan-detail" plan.0.pk %}#{{plan.0.commented_at|date:"U"}}">{{ plan.0.name }}</a>{% if plan.1 %}</b>{% endif %} (<a href="{% url "plan-detail" plan.0.pk %}#{{plan.0.commented_at|date:"U"}}">{{plan.0.comment_count}} comments</a>)<br/><p>{{plan.0.situation|truncatechars:314}}</p>
    {% endfor %}
    <a href="{% url "plan-list" %}">see more</a>
    </div>
</div>

<div class="panel panel-default col-md-3">
    <div class="panel-heading">
        <a href="{% url "step-list" %}">Steps</a>&nbsp;<i class="fa fa-minus-square-o"></i>&nbsp; - <b>break it down</b><div style="display:inline-block; float: right;"> <form method="post" style="display:inline;">{% csrf_token %}<select name="steps" onchange="this.form.submit()">{% for value in dropdown_list %}<option value="{{ value }}" {% if items.steps == value %}selected{% endif %}>{{ value }}</option>{% endfor %}</select></form></div>
    </div>
    <div class="panel-body">
    <p align="center"><i>(steps commented in last {{ step_days }} days)</i></p>
    {% for step in step_list %}
    <b>$ {{ step.0.get_usd|floatformat:2 }}/{{ step.0.get_remain_usd|floatformat:2 }} </b> {% if step.1 %}<b>{% endif %}<a href="{% url "step-detail" step.0.pk %}#{{step.0.commented_at|date:"U"}}">{{ step.0.name }}</a>{% if step.1 %}</b>{% endif %} (<a href="{% url "step-detail" step.0.pk %}#{{step.0.commented_at|date:"U"}}">{{step.0.comment_count}} comments</a>)<br/><p>{{step.objective|truncatechars:314}}</p>
    {% endfor %}
    <a href="{% url "step-list" %}">see more</a>
    </div>
</div>

<div class="panel panel-default col-md-3">
    <div class="panel-heading">
        <a href="{% url "task-list" %}">Tasks</a>&nbsp;<i class="fa fa-minus-square-o"></i>&nbsp; - <b>execute it</b><div style="display:inline-block; float: right;"><form method="post" style="display:inline;">{% csrf_token %}<select name="tasks" onchange="this.form.submit()">{% for value in dropdown_list %}<option value="{{ value }}" {% if items.tasks == value %}selected{% endif %}>{{ value }}</option>{% endfor %}</select></form></div>
    </div>

    <div class="panel-body">
    <p align="center"><i>(tasks commented in last {{ task_days }} days)</i></p>
    {% for task in task_list %}
    <b>$ {{ task.0.get_usd|floatformat:2 }}/{{ task.0.get_remain_usd|floatformat:2 }} </b> {% if task.1 %}<b>{% endif %}<a href="{% url "task-detail" task.0.pk %}#{{task.0.commented_at|date:"U"}}">{{ task.0.name }}</a>{% if task.1 %}</b>{% endif %} (<a href="{% url "task-detail" task.0.pk %}#{{task.0.commented_at|date:"U"}}">{{task.0.comment_count}} comments</a>)
    <br>
    {% endfor %}
    <a href="{% url "task-list" %}">see more</a>
    </div>
</div>

</div>
{% endblock content %}
