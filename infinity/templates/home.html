{% extends "base.html" %}
{% load i18n %}

{% load django_markdown %}

{% block title %}Index{% endblock %}

{% block page_title %}Index{% endblock page_title %}

{% block content %}
<style>
    .container {
    width: 100%;
}
</style>

{% if not user.is_anonymous %}
<div class="alignright">
    {% if user.invitationoption.invitations_left %}
    <b>
        [<a href="{% url "invite:send"  %}">{{user.invitationoption.invitations_left}} {% trans "invitations" %}</a>, <a href="/step/2/detail/">{% trans "write bugs" %}</a>, {% trans "time value" %}: 1 Ä§ = <a href="https://research.stlouisfed.org/fred2/series/CES0500000003">{{ hour_value.value|floatformat:2 }}</a> $]
    </b>
    {% endif %}
</div>
{% endif %}

<div class="alignleft">
    {% if not user.is_anonymous %}
    <b>
        [{% if request.resolver_match.url_name == 'wider' %}<a href="{% url "home" %}">{% trans "my index" %}</a>{% else %}<a href="{% url "wider" %}">{% trans "wider index" %}</a>{% endif %}]
    </b>
    {% endif %}
    <!--<input autocomplete="off" tabindex="-1" type="url" aria-hidden="true" size="35" disabled><input type="submit" value="lookup" style="color: GrayText;" disabled>-->
</div>

<div style="clear:both;">
    <br/>

    <link rel="stylesheet" href="/static/css/bootstrap-horizon.css">

    <div class="row row-horizon">
        <div class="panel panel-default col-md-4 block-content">
            <div class="panel-heading">
                <a href="{% url "goal-list" %}">{% trans "Goals" %}</a>
                &nbsp; <a href="{% url "goal-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; - <b>{% trans "define a problem" %}</b>

                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="goals" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.goals == value %}selected{% endif %}>{{ value }}</option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
            </div>

            <div class="panel-body">
                {% if goal_list %}
                    <p align="center"><i>{% trans "(last commented" %} {{ goal_hours }} {% trans "hours ago)" %}</i></p>
                    {% for goal in goal_list %}
                        {% if goal.translation %} {# if goal translated #}
                            <b>
                                {% if goal.object.personal %}
                                <i class="fa {% if goal.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                                $ {{ goal.object.get_usd|floatformat:2 }}/{{ goal.object.get_remain_usd|floatformat:2 }}
                                {% endif %}
                            </b>
                            
                            {% if goal.is_new %} {# if goal is new #}
                                <b><a href="{% url "goal-detail" goal.object.pk %}?lang={{goal.translation.language.language_code}}#{{goal.object.commented_at|date:"U"}}">{{ goal.translation.name }}</a></b>

                            {% else %} {# if goal is old #}
                                <a href="{% url "goal-detail" goal.object.pk %}?lang={{goal.translation.language.language_code}}#{{goal.object.commented_at|date:"U"}}">{{ goal.translation.name }}</a>
                            {% endif %}

                            ({{goal.object.comment_count}} comments)

                            <br/>

                            <p>{{goal.object.reason|markdown|truncatewords_html:34}}</p>
                        {% endif %}
                    {% endfor %}
                    <a href="{% url "goal-list" %}">{% trans "see more" %}</a>
                {% else %}
                    <center>
                        <p>{% trans "Oops! You have no goals!" %}</p>
                        <p><a href="{% url "goal-create" %}">{% trans "Add a problem" %}</a></p>
                        <p>{% trans "...or view" %} <a href="{% url "wider" %}">{% trans "<u>wider index</u>" %}</a>.</p>
                    </center>

                    {% blocktrans %}
                    <p><i><u>Example:</u></i></p>
                    <p><b>$ 0.00 Having Omelette</b></p>
                    <p>Omelette is a healthy and delicious food, which can be flavored in desired tastes. I like it, and I would like to eat omelete every morning, without any extra expenses.</p>
                    {% endblocktrans %}
                {% endif %}
            </div>
        </div>

        <div class="panel panel-default col-md-4 block-content">
            <div class="panel-heading">
                <a href="{% url "idea-list" %}">{% trans "Ideas" %}</a>&nbsp;
                <a href="{% url "idea-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; - <b>{% trans "suggest a solution" %}</b>
            </div>

            <div style="display:inline-block; float: right;">
                <form method="post" style="display:inline;">{% csrf_token %}
                    <select name="ideas" onchange="this.form.submit()">
                        {% for value in dropdown_list %}
                        <option value="{{ value }}" {% if items.ideas == value %}selected{% endif %}>
                        {{ value }}
                        </option>
                        {% endfor %}
                    </select>
                </form>
            </div>

            <div class="panel-body">
                {% if idea_list %}
                <p align="center">
                <i>{% trans "(last commented" %} {{ idea_hours }} {% trans "hours ago)" %}</i>
                </p>
                {% for idea in idea_list %}
                    
                    {% if idea.translation %} {# if idea translated #}
                        <b>
                            {% if idea.object.personal %}
                            <i class="fa {% if idea.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                            {% endif %}
                            $ {{ idea.object.get_usd|floatformat:2 }}/{{ idea.object.get_remain_usd|floatformat:2 }}

                        </b>

                        {% if idea.is_new %} {# if idea is new #}

                            <b><a href="{% url "idea-detail" idea.object.pk %}?lang={{idea.translation.language.language_code}}#{{idea.object.commented_at|date:"U"}}">{{ idea.translation.name }}</a></b>

                        {% else %} {# if idea is old #}
                            <a href="{% url "idea-detail" idea.object.pk %}?lang={{idea.object.language.language_code}}#{{idea.object.commented_at|date:"U"}}">{{ idea.translation.name }}</a>

                    {% endif %}

                    ({{idea.object.comment_count}} comments</a>)

                {% endif %}


                <br/>

                <p>{{idea.object.description|markdown|truncatewords_html:34}}</p>

                {% endfor %}

                <a href="{% url "idea-list" %}">{% trans "see more" %}</a>

                {% else %}
                <center>
                    <p>{% trans "Oops! You have no ideas!" %}</p>
                    <p><a href="{% url "idea-create" %}">{% trans "Add a solution" %}</a></p>
                    <p>{% trans "...or view" %} <a href="{% url "wider" %}">{% trans "<u>wider index</u>" %}</a>.</p>
                </center>

                {% blocktrans %}
                <p><i><u>Example ideas:</u></i></p>
                <p><b>$ 0.00 Go to buy eggs and spices, and cook one</b></p>
                <p>It's easy enough just to cook.</p>
                <p><b>$ 0.00 Hen Mini-Farm With Automated Egg Processor</b></p>
                <p>Hens don't really require much human work to maintain. Set up the robotic feeders, egg collectors, washers, breakers, timed mixers, spicers, cookers and dispensers - and have a self-sustaining supply of fresh omelete.</p>
                {% endblocktrans %}

                {% endif %}
            </div>
        </div>

        <div class="panel panel-default col-md-4 block-content">
            <div class="panel-heading">
                <a href="{% url "plan-list" %}">{% trans "Plans" %}</a>&nbsp;
                <a href="{% url "plan-create" %}"><i class="fa fa-plus-circle"></i></a>&nbsp; -
                <b>{% trans "start a project" %}</b>

                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="plans" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.plans == value %}selected{% endif %}>
                            {{ value }}
                            </option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
            </div>

            <div class="panel-body">
                {% if plan_list %}

                <p align="center"><i>{% trans "(last commented" %} {{ plan_hours }} {% trans "hours ago)" %}</i></p>
                {% for plan in plan_list %}
                <b>
                    {% if plan.object.personal %}
                    <i class="fa {% if plan.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                    {% endif %}

                    $ {{ plan.object.get_usd|floatformat:2 }}/{{ plan.object.get_remain_usd|floatformat:2 }}
                </b>

                {% if plan.is_new %} {# if plan is new #}

                    {% if plan.translation %} {# if has a translation #}
                    <b><a href="{% url "plan-detail" plan.object.pk %}?lang={{plan.translation.language.language_code}}#{{plan.object.commented_at|date:"U"}}">{{ plan.translation.name }}</a></b>
                    {% else %}
                    <b><a href="{% url "plan-detail" plan.object.pk %}?lang={{plan.translation.language.language_code}}#{{plan.object.commented_at|date:"U"}}">{{ plan.object.name }}</a></b>
                    {% endif %}

                {% else %} {# if plan is old #}
                    
                    {% if plan.translation %} {# if has a translation #}
                    <a href="{% url "plan-detail" plan.object.pk %}?lang={{plan.translation.language.language_code}}#{{plan.object.commented_at|date:"U"}}">{{ plan.translation.name }}</a>
                    {% else %}
                    <a href="{% url "plan-detail" plan.object.pk %}?lang={{plan.translation.language.language_code}}#{{plan.object.commented_at|date:"U"}}">{{ plan.object.name }}</a>
                    {% endif %}

                {% endif %}

                ({{plan.object.comment_count}} comments)

                <br/>
                {% if plan.translation %} {# if plan has translation #}
                <p>{{plan.translation.situation|markdown|truncatewords_html:34}}</p>
                {% else %}
                <p>{{plan.object.situation|markdown|truncatewords_html:34}}</p>
                {% endif %}

                {% endfor %}

                <a href="{% url "plan-list" %}">{% trans "see more" %}</a>

                {% else %}
                <center>
                    <p>{% trans "Oops! You have no plans!" %}</p>
                    <p><a href="{% url "plan-create" %}">{% trans "Add a project" %}</a></p>
                    <p>{% trans "...or view" %} <a href="{% url "wider" %}">{% trans "<u>wider index</u>" %}</a>.</p>
                </center>
                {% blocktrans %}

                <p><i><u>Example:</u></i></p>
                <p><b>$ 0.00 Omelette Microfarm Project</b></p>
                <p><u>Situation:</u> I in Dublin, Ireland, with my friend X.</p>
                <p><u>Destination:</u> we have a microfarm solution to home owners.</p>
                {% endblocktrans %}
                {% endif %}
            </div>
        </div>

        <div class="panel panel-default col-md-4 block-content">
            <div class="panel-heading">
                <a href="{% url "step-list" %}">{% trans "Steps" %}</a>&nbsp;
                <i class="fa fa-minus-square-o"></i>&nbsp; -
                <b>{% trans "break it down" %}</b>

                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="steps" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.steps == value %}selected{% endif %}>
                            {{ value }}
                            </option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
            </div>

            <div class="panel-body">
                {% if step_list %}

                <p align="center"><i>{% trans "(last commented" %} {{ step_hours }} {% trans "hours ago)" %}</i></p>

                {% for step in step_list %}
                <b>
                    {% if step.object.personal %}
                    <i class="fa {% if step.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>
                    {% endif %}

                    $ {{ step.object.get_usd|floatformat:2 }}/{{ step.object.get_remain_usd|floatformat:2 }}
                </b>

                {% if step.is_new %} {# if step is new #}

                    {% if step.translation %}  {# if has a translation #}
                    <b><a href="{% url "step-detail" step.object.pk %}?lang={{step.translation.language.language_code}}#{{step.object.commented_at|date:"U"}}">{{ step.translation.name }}</a></b>
                    {% else %}
                    <b><a href="{% url "step-detail" step.object.pk %}?lang={{step.translation.language.language_code}}#{{step.object.commented_at|date:"U"}}">{{ step.object.name }}</a></b>
                    {% endif %}

                {% else %} {# if step is old #}

                    {% if step.translation %}  {# if has a translation #}
                    <a href="{% url "step-detail" step.object.pk %}?lang={{step.translation.language.language_code}}#{{step.object.commented_at|date:"U"}}">{{ step.translation.name }}</a>
                    {% else %}
                    <a href="{% url "step-detail" step.object.pk %}?lang={{step.translation.language.language_code}}#{{step.object.commented_at|date:"U"}}">{{ step.object.name }}</a>
                    {% endif %}

                {% endif %}

                ({{step.object.comment_count}} comments)
                <br/>

                <p>{{step.objective|markdown|truncatewords_html:34}}</p>

                {% endfor %}
                <a href="{% url "step-list" %}">{% trans "see more" %}</a>
                {% else %}
                <center>
                    <p>{% trans "Oops! You have no steps!" %}</p>
                    <p>{% trans "Start a project to add milestones" %}</p>
                    <p>{% trans "...or view" %} <a href="{% url "wider" %}">{% trans "<u>wider index</u>" %}</a>.</p>
                </center>

                {% blocktrans %}
                <p><i><u>Example:</u></i></p>
                <p><b>$ 0.00 Check existing solutions</b></p>
                <p><u>Objective:</u> find out best technologies small farms use.</p>
                <p><b>$ 0.00 Ideate on specific combination of them</b></p>
                <p><u>Objective:</u> Come out with a viable candidate of full integration.</p>
                <p><b>$ 0.00 Compute the expected costs of development and returns. </b></p>
                <p><u>Objective:</u> Come out with a viable business plan.</p>
                ...
                {% endblocktrans %}
                {% endif %}
            </div>
        </div>

        <div class="panel panel-default col-md-4 block-content">
            <div class="panel-heading">
                <a href="{% url "task-list" %}">{% trans "Tasks" %}</a>&nbsp;
                <i class="fa fa-minus-square-o"></i>&nbsp; -
                <b>{% trans "execute it" %}</b>

                <div style="display:inline-block; float: right;">
                    <form method="post" style="display:inline;">{% csrf_token %}
                        <select name="tasks" onchange="this.form.submit()">
                            {% for value in dropdown_list %}
                            <option value="{{ value }}" {% if items.tasks == value %}selected{% endif %}>{{ value }}
                            </option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
            </div>

            <div class="panel-body">
                {% if task_list %}
                <p align="center"><i>{% trans "(last commented" %} {{ task_hours }} {% trans "hours ago)" %}</i></p>

                {% for task in task_list %}
                <b>
                    {% if task.object.personal %}
                    <i class="fa {% if task.object.user == request.user %}fa-lock{% else %}fa-flag{% endif %}"></i>{% endif %}

                    $ {{ task.object.get_usd|floatformat:2 }}/{{ task.object.get_remain_usd|floatformat:2 }}
                </b>

                {% if task.is_new %} {# if task is new #}

                    {% if task.translation %} {# if has a translation #}
                    <b><a href="{% url "task-detail" task.object.pk %}?lang={{task.translation.language.language_code}}#{{task.object.commented_at|date:"U"}}">{{ task.translation.name }}</a></b>
                    {% else %}
                    <b><a href="{% url "task-detail" task.object.pk %}?lang={{task.translation.language.language_code}}#{{task.object.commented_at|date:"U"}}">{{ task.object.name }}</a></b>
                    {% endif %}

                {% else %} {# if task is old #}

                    {% if task.translation %} {# if has a translation #}
                    <a href="{% url "task-detail" task.object.pk %}?lang={{task.translation.language.language_code}}#{{task.object.commented_at|date:"U"}}">{{ task.translation.name }}</a>
                    {% else %}
                    <a href="{% url "task-detail" task.object.pk %}?lang={{task.translation.language.language_code}}#{{task.object.commented_at|date:"U"}}">{{ task.object.name }}</a>
                    {% endif %}
                {% endif %}

                ({{task.object.comment_count}} comments)

                <br>

                {% endfor %}

                <a href="{% url "task-list" %}">{% trans "see more" %}</a>
                {% else %}
                <center>
                    <p>{% trans "Oops! You have no tasks!" %}</p>
                    <p>{% trans "Choose a milestone to add tasks" %}</p>
                    <p>{% trans "...or view" %} <a href="{% url "wider" %}">{% trans "<u>wider index</u>" %}</a>.</p>
                </center>
                {% blocktrans %}
                <p><i><u>Example:</u></i></p>
                <p><b>$ 0.00 Open the internet and do a research.</b></p>
                ...
                {% endblocktrans %}
                {% endif %}
            </div>
        </div>
    </div>
    <div align="center">{% trans "People-centric economy." %}</div>
</div>
{% endblock content %}
