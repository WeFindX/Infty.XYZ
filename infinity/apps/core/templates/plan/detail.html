{% extends "base.html" %}

{% load crispy_forms_tags %}
{% load django_markdown %}

{% block title %}p: {{ object.name }}{% endblock title %}

{% block content %}

<script>
function showMore(){
    document.getElementById("stats").innerHTML = "<span onmouseout='showLess()'>[<u>assumed</u> {{ object.total_assumed|floatformat:2 }} h, <u>donated</u> {{ object.total_donated|floatformat:2 }} ħ, <u>claimed</u> {{ object.total_claimed|floatformat:2 }}, <u>matched</u> {{ object.total_matched|floatformat:2}} ḥ]</span>";
}

function showLess(){
    document.getElementById("stats").innerHTML = "<span onmouseover='showMore()'><b>[<u>needs ${{ object.get_remain_usd|floatformat:2 }} for funding {{ object.not_funded_hours|floatformat:2}} hours</u>]</b></span>";
}
</script>

<div class="panel panel-default box col-sm-12 col-md-7">
<div class="panel-body">
    <div align="right" id="stats">
        <span onmouseover="showMore()"><b>[<u>needs ${{ object.get_remain_usd|floatformat:2 }} for funding {{ object.not_funded_hours|floatformat:2}} hours</u>]</b></span>
    </div>
    <div align="right">
[<u>shareholders:</u> {% for member in object.members.all %} <a href="{% url 'user-detail' member.username %}">{{ member.username }}</a>, {% endfor %}<u>equity</u>: {{ object.get_equity|floatformat:0 }}% ḥ]<br/>
    
    </div>

approach to realizing idea <a href="{% url "idea-detail" object.idea.pk %}">{{object.idea }}</a>
<h1>{{ object.name }}</h1>{% if object.user == request.user %}[<a href="{% url "plan-update" object.pk %}">edit</a>, <a href="{% url "plan-delete" object.pk %}">delete</a>]{% endif %}
<br/>
<br/>

<center>situation</center>
<div class="breadcrumb">
{{object.situation|markdown}}
</div>

<center>deliverable</center>
<div class="breadcrumb">
{{object.deliverable|markdown}}
</div>

<div align="right">--[<a href="{% url 'user-detail' object.user.username %}">{{object.user}}</a>], {{object.created_at}}</div>
</div>



<div class="panel-heading">Steps</div>
<div class="panel-body">
{% for object in step_list %}
    <ul class="list-group">
      <li class="list-group-item">
         <a href="{% url "step-detail" object.pk %}">{{object.name}}</a> 
         <p>{{object.objective}}</p>
      </li>
    </ul>
{% endfor %}
<a href="{% url "step-create" object.pk %}">+New Step</a>
</div>

</div>


{# Include comment list with transactions #}
{% include "comment/list.html" %}

{% endblock content %}
